(function(e){function t(t){for(var o,s,c=t[0],a=t[1],l=t[2],p=0,h=[];p<c.length;p++)s=c[p],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&h.push(r[s][0]),r[s]=0;for(o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o]);u&&u(t);while(h.length)h.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],o=!0,c=1;c<n.length;c++){var a=n[c];0!==r[a]&&(o=!1)}o&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var o={},r={logView:0},i=[];function s(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=o,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(n,o,function(t){return e[t]}.bind(null,o));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],a=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var u=a;i.push([8,"chunk-vendors","chunk-common"]),n()})({"4b42":function(e,t,n){},5805:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("a026"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("logView")},i=[],s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"xterm-container",attrs:{id:"xterm"}})},c=[],a=(n("ac1f"),n("841c"),n("1276"),n("abb2"),n("fcf3")),l=n("47d0"),u=n("408b"),p={data:function(){return{pingOk:!0,resize:!1,term:"",socket:"",app:"",server:"",pod:"",history:"",nodeip:""}},mounted:function(){this.app=this.getQueryVariable("ServerApp"),this.server=this.getQueryVariable("ServerName"),this.pod=this.getQueryVariable("PodName"),this.history=this.getQueryVariable("History"),this.nodeip=this.getQueryVariable("NodeIP"),document.title=this.app+"-"+this.server+"-"+this.nodeip;var e=window.location.search.substring(1);"http:"==window.location.protocol?this.init("ws://"+window.location.host+"/shell?"+e):"https:"==window.location.protocol?this.init("wss://"+window.location.host+"/shell?"+e):console.log("unknown protocol",window.location)},methods:{debounce:function(e,t){var n=null;return function(){null!==n&&clearTimeout(n),n=setTimeout(e,t)}},resizeScreen:function(){var e=new l["FitAddon"];this.term.loadAddon(e),e.fit(),this.send(JSON.stringify({operation:"resize",width:Math.floor(this.term.cols),height:Math.floor(this.term.rows)}))},ping:function(){var e=this;this.pingOk?(this.pingOk=!1,this.send(JSON.stringify({operation:"ping"})),setTimeout((function(){console.log("ping"),e.ping()}),5e3)):location.reload()},getQueryVariable:function(e){for(var t=window.location.search.substring(1),n=t.split("&"),o=0;o<n.length;o++){var r=n[o].split("=");if(r[0]==e)return r[1]}return!1},initXterm:function(){this.term=new a["Terminal"]({rendererType:"canvas",convertEol:!0,scrollback:2e3,disableStdin:!1,cursorStyle:"block",cursorBlink:!0}),this.term.open(document.getElementById("xterm")),this.resizeScreen(),this.term.loadAddon(new u["WebLinksAddon"]),window.addEventListener("resize",this.debounce(this.resizeScreen,1e3),!1),this.term.focus();var e=this;this.term.onData((function(t){var n={operation:"stdin",data:t};e.socket.onsend(JSON.stringify(n)),e.resize||(e.resize=!0,e.resizeScreen())}))},init:function(e){var t=this;this.socket=new WebSocket(e,"echo-protocol"),this.socket.onopen=this.open,this.socket.onerror=this.error,this.socket.onmessage=this.getMessage,this.socket.onsend=this.send,setTimeout((function(){t.ping()}),5e3)},open:function(){this.initXterm(),this.term.writeln("connecting to pod [1;3;31m ".concat(this.pod," [0m ... \r\n"))},error:function(){console.log("[error] Connection error"),setTimeout((function(){location.reload()}),1e3)},close:function(){this.socket.close(),console.log("[close] Connection closed cleanly"),term.writeln(""),window.removeEventListener("resize",this.resizeScreen)},getMessage:function(e){var t=e.data&&JSON.parse(e.data);"stdout"===t.operation?this.term.write(t.data):"pong"===t.operation&&(this.pingOk=!0)},send:function(e){this.socket.send(e)}}},h=p,d=(n("a950"),n("2877")),f=Object(d["a"])(h,s,c,!1,null,null,null),g=f.exports,m={components:{logView:g},data:function(){return{}}},w=m,b=Object(d["a"])(w,r,i,!1,null,null,null),v=b.exports;n("b3f5");o["default"].config.productionTip=!1,new o["default"]({el:"#app",components:{App:v},template:"<App/>"})},8:function(e,t,n){e.exports=n("5805")},a950:function(e,t,n){"use strict";var o=n("4b42"),r=n.n(o);r.a}});